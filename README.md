# Rental Car Assist System

## 📌 프로젝트 개요

렌터카 차량에 **센서 기반 안전 보조 시스템**을 구축한 프로젝트입니다. Raspberry Pi 환경에서 다양한 센서와 액추에이터를 제어하며, 서버-클라이언트 구조로 **실시간 데이터 수집, 분석, 제어**를 수행합니다.

* **개발 언어/환경**: Linux, C, Raspberry Pi, WiringPi, Socket Programming
* **아키텍처**: 서버 + 3종 클라이언트 (센서 / 컨트롤러 / 액추에이터)
* **목표**: 주행 중 안전성과 편의성 확보

---

## ⚙️ 기술 스택

### 언어 및 환경
- C 언어
- Raspberry Pi (Linux 기반)

### 하드웨어 제어
- **WiringPi**: GPIO 제어  
- **SPI (MCP3208)**: 아날로그 센서 입력 처리  
- **GPIO 인터럽트**: 외부 이벤트 감지  

### 네트워크
- **TCP/IP 소켓 프로그래밍**  
- **멀티클라이언트 처리**  
- **select() 기반 이벤트 처리**  

### 시스템 프로그래밍
- **pthread**: 멀티스레드 처리  
- **fork**: 프로세스 생성 및 병렬 처리  
- **pipe**: 프로세스 간 통신 (IPC)

---


## 🏗 시스템 아키텍처

* **서버 (server.c)**

  * 모든 클라이언트와 TCP 통신
  * 센서 데이터 로깅 (가스, PIR, 온도, 초음파, 조이스틱)
  * 제어 명령 분배 (부저, 모터, 센서 활성화)

* **센서 클라이언트 (senser\_client.c)**

  * **가스 센서**: 환경 유해 가스 측정
  * **PIR 센서**: 움직임 감지 및 경고
  * **초음파 센서**: 거리 측정
  * **온도 센서 (DHT11)**: 실내 온도 수집 및 송신

* **컨트롤러 클라이언트 (controll\_client.c)**

  * 조이스틱 입력으로 차량 제어
  * 기어 상태(P, R, N, D) 변경
  * LOCK/UNLOCK 동작 전달
  * 후진(R) 시 자동으로 초음파 센서 활성화

* **액추에이터 클라이언트 (actuator\_client.c)**

  * **DC 모터**: 냉방/난방 모드 반응
  * **부저**: 충돌 위험 거리 알림

---

## ⚙ 주요 기능

1. **실시간 센서 데이터 수집 및 전송**

   * 초음파 거리 데이터 → 후방 충돌 경고
   * 가스 농도 → 임계값 초과 시 경고 및 로그
   * 온도 값 → 일정 범위 밖이면 냉난방 제어 명령 전송

2. **컨트롤러 기반 제어**

   * 조이스틱으로 기어 상태 전환 (P/R/N/D)
   * LOCK → PIR 센서 활성화 / UNLOCK → PIR 비활성화

3. **액추에이터 반응 제어**

   * 서버 명령에 따라 부저 LEVEL 1, LEVEL 2, OFF 제어
   * DC 모터로 난방/냉방 반응 수행

4. **서버 로깅 및 이벤트 관리**

   * 센서별 로그 파일 저장 (`pir_sensor_log.txt`, `temperature_log.txt` 등)
   * `fork` + `pipe` + `select()` 구조로 멀티프로세스 관리

---

## 🔧 기술적 구현

* **통신**: TCP Socket 통신 (역할 기반 연결: SENSOR / CONTROLLER / ACTUATOR)
* **멀티스레드**: 센서 데이터 병렬 수집 (`pthread`)
* **멀티프로세스**: 서버에서 클라이언트별 fork + pipe IPC
* **하드웨어 제어**:

  * `wiringPi`로 GPIO 제어
  * SPI 통신 (MCP3208)으로 아날로그 센서 값 읽기
* **안정성 확보**: `select()` 기반 이벤트 모니터링

---

## 🏆 성과 및 배운 점

* 실제 하드웨어와 소프트웨어를 통합한 **IoT 시스템** 개발 경험
* 센서 데이터 기반의 **실시간 제어 시스템 아키텍처 설계**
* **멀티스레드/멀티프로세스 프로그래밍**의 동기화 이슈 해결 경험
* 소켓 통신과 하드웨어 제어 결합에 대한 실습적 이해

---

## 📂 프로젝트 구조

```
├── actuator_client.c    # 액추에이터 제어 (DC 모터, 부저)
├── controll_client.c    # 컨트롤러 (조이스틱 입력)
├── senser_client.c      # 센서 클라이언트 (가스, PIR, 초음파, 온도)
├── server.c             # 서버 (통신/로깅/제어)
├── README.md            # 프로젝트 설명
```

---

## 🚀 결론

본 프로젝트는 **렌터카 보조 시스템**을 실제 하드웨어 기반으로 구현하여, 안전성과 편의성을 높이는 데 초점을 맞추었습니다. 서버-클라이언트 아키텍처와 센서/액추에이터 제어 경험을 통해 **IoT 시스템 설계 및 구현 능력**을 키울 수 있었습니다.
